{"version":3,"file":"blocks/auth-modal/frontend.js","mappings":"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","sources":["webpack://udemy-plus/./src/blocks/auth-modal/frontend.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n  // Open and close the sign in modal\r\n  const openModalBtn = document.querySelectorAll(\".open-modal\")\r\n  const modalElement = document.querySelector(\".wp-block-udemy-plus-auth-modal\")\r\n  const modalCloseElement = document.querySelectorAll(\".modal-overlay, .modal-btn-close\")\r\n\r\n  openModalBtn.forEach(el => {\r\n    el.addEventListener(\"click\", event => {\r\n      event.preventDefault()\r\n      modalElement.classList.add(\"modal-show\")\r\n    })\r\n  })\r\n\r\n  modalCloseElement.forEach(el => {\r\n    el.addEventListener(\"click\", event => {\r\n      event.preventDefault()\r\n      modalElement.classList.remove(\"modal-show\")\r\n    })\r\n  })\r\n\r\n  //change sign in modal tabs\r\n  const tabs = document.querySelectorAll(\".tabs a\")\r\n  const signinForm = document.querySelector(\"#signin-tab\")\r\n  const signupForm = document.querySelector(\"#signup-tab\")\r\n\r\n  tabs.forEach(tab => {\r\n    tab.addEventListener(\"click\", e => {\r\n      e.preventDefault()\r\n\r\n      //looping to remove the active tab class\r\n      tabs.forEach(currentTab => {\r\n        currentTab.classList.remove(\"active-tab\")\r\n      })\r\n\r\n      //set the current tab to active\r\n      e.currentTarget.classList.add(\"active-tab\")\r\n\r\n      //get the href attrivbute to match the form id of each form\r\n      const activeTab = e.currentTarget.getAttribute(\"href\")\r\n\r\n      if (activeTab === \"#signin-tab\") {\r\n        signinForm.style.display = \"block\"\r\n        signupForm.style.display = \"none\"\r\n      } else {\r\n        signinForm.style.display = \"none\"\r\n        signupForm.style.display = \"block\"\r\n      }\r\n    })\r\n  })\r\n\r\n  // Handle signup form\r\n  signupForm.addEventListener(\"submit\", async e => {\r\n    e.preventDefault()\r\n    const signUpFieldset = signupForm.querySelector(\"fieldset\")\r\n    signUpFieldset.setAttribute(\"disabled\", true)\r\n\r\n    const signUpStatus = signupForm.querySelector(\"#signup-status\")\r\n    signUpStatus.innerHTML = `\r\n      <div class=\"modal-status modal-status-info\">\r\n        Please Wait! We are creating your account.\r\n      </div>\r\n    `\r\n\r\n    const formData = {\r\n      username: signupForm.querySelector(\"#su-name\").value,\r\n      email: signupForm.querySelector(\"#su-email\").value,\r\n      password: signupForm.querySelector(\"#su-password\").value\r\n    }\r\n\r\n    // up_auth_rest is from the inline script in enqueue.php\r\n    const response = await fetch(up_auth_rest.signup, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(formData)\r\n    })\r\n\r\n    const responseJSON = await response.json()\r\n\r\n    // user successfully added\r\n    if (responseJSON.status === 2) {\r\n      signUpStatus.innerHTML = `\r\n        <div class=\"modal-status modal-status-success\">\r\n          Success! Your account has been created.\r\n        </div>\r\n      `\r\n      location.reload()\r\n    } else {\r\n      signUpFieldset.removeAttribute(\"disabled\")\r\n      signUpStatus.innerHTML = `\r\n        <div class=\"modal-status modal-status-danger\">\r\n          Unable to create an account please try again later.\r\n        </div>\r\n      `\r\n    }\r\n  })\r\n\r\n  // Handle signin form\r\n  signinForm.addEventListener(\"submit\", async e => {\r\n    e.preventDefault()\r\n\r\n    const signinFieldset = signinForm.querySelector(\"fieldset\")\r\n    const signinStatus = signinForm.querySelector(\"#signin-status\")\r\n\r\n    signinFieldset.setAttribute(\"disabled\", true)\r\n    signinStatus.innerHTML = `\r\n      <div class=\"modal-status modal-status-info\">\r\n        Please wait! We are logging you in.\r\n      </div>\r\n    `\r\n\r\n    const formData = {\r\n      user_login: signinForm.querySelector(\"#si-email\").value,\r\n      password: signinForm.querySelector(\"#si-password\").value\r\n    }\r\n\r\n    const response = await fetch(up_auth_rest.signin, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(formData)\r\n    })\r\n\r\n    const responseJSON = await response.json()\r\n\r\n    if (responseJSON.status === 2) {\r\n      signinForm.innerHTML = `\r\n        <div class=\"modal-status modal-status-success\">\r\n          Success! You are now logged in.\r\n        </div>\r\n      `\r\n      location.reload()\r\n    } else {\r\n      signinFieldset.removeAttribute(\"disabled\")\r\n      signinStatus.innerHTML = `\r\n        <div class=\"modal-status modal-status-danger\">\r\n          Invalid credentials! Please try again later.\r\n        </div>\r\n      `\r\n    }\r\n  })\r\n})\r\n"],"names":["document","addEventListener","openModalBtn","querySelectorAll","modalElement","querySelector","modalCloseElement","forEach","el","event","preventDefault","classList","add","remove","tabs","signinForm","signupForm","tab","e","currentTab","currentTarget","activeTab","getAttribute","style","display","signUpFieldset","setAttribute","signUpStatus","innerHTML","formData","username","value","email","password","response","fetch","up_auth_rest","signup","method","headers","body","JSON","stringify","responseJSON","json","status","location","reload","removeAttribute","signinFieldset","signinStatus","user_login","signin"],"sourceRoot":""}